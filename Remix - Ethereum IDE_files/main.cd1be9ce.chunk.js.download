(this.webpackJsonpplugintester=this.webpackJsonpplugintester||[]).push([[0],{151:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n.n(r),c=n(43),i=n.n(c),s=(n(55),n(0)),u=n.n(s),o=n(3),l=n(49),f=function(t,e){var n=Object(r.useState)(e),a=Object(l.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var e=t.subscribe(i);return function(){return e.unsubscribe()}}),[t]),c},p=function(t){return f(t,t.value)},h=(n(57),n(44)),d=n(45),v=n(8),b=n(50),m=n(48),j=n(20),x=n(46),y=n(154),w=n(21),k=/^\s*import(\s+).*$/gm,O=/^\s*\/\/ SPDX-License-Identifier:.*$/gm;function g(t,e){var n=function(t){var e=new C;t&&t.forEach((function(t){C.prototype.add.apply(e,t)}));return e}(),r={};return r[e]=1,S(n,r,t,e),n}function F(t,e){var n,r="",a=Object(w.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value,i=e[c].content.replace(k,"").replace(O,"");r+="\n// File: ".concat(c,"\n\n"),r+=i}}catch(s){a.e(s)}finally{a.f()}return r}function S(t,e,n,r){var a,c=function(t){return t.nodes.filter((function(t){return"ImportDirective"===t.nodeType})).map((function(t){return t.file}))}(n[r].ast),i=Object(w.a)(c);try{for(i.s();!(a=i.n()).done;){var s=E(r,a.value);e[s]=1,t.add(r,s),S(t,e,n,s)}}catch(u){i.e(u)}finally{i.f()}}function C(){this.nodes={}}function E(t,e){return function(t){return"."!==t[0]}(e)?e:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r&&"."!==r&&(".."===r?e.length&&".."!==e[e.length-1]&&e.pop():e.push(r))}return e}((t+"/../"+e).split("/")).join("/").replace("http:/","http://").replace("https:/","https://")}C.prototype.add=function(){var t=this,e=[].slice.call(arguments);1===e.length&&Array.isArray(e[0])&&(e=e[0]),e.forEach((function(e){t.nodes[e]||(t.nodes[e]=[])}));for(var n=1;n<e.length;n++){var r=e[n],a=e[n-1];t.nodes[r].push(a)}return t},C.prototype.sort=function(){for(var t=this,e=Object.keys(this.nodes),n=[],r={},a=0;a<e.length;a++){var c=e[a];r[c]||i(c)}return n;function i(e){if("temp"===r[e])throw new Error("There is a cycle in the graph. It is not possible to derive a topological sort.");r[e]||(r[e]="temp",t.nodes[e].forEach(i),r[e]="perm",n.push(e))}},C.prototype.isEmpty=function(){return 0===Object.keys(this.nodes).length};var N=n(47),P=n.n(N),A=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(h.a)(this,n),(t=e.call(this)).callBackEnabled=!0,t.feedback=new y.a(""),t.fileName=new y.a(""),t.flatFileName=new y.a(""),t.filePath="",t.compilationResult=void 0,t.flattenedSources=void 0,t.flattenSwitch=!1,Object(x.createClient)(Object(v.a)(t)),t.methods=["flattenAndSave","flatten","flattenFile","flattenFileCustomAction"],t.onload().then(function(){var e=Object(o.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setCallBacks();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t}return Object(d.a)(n,[{key:"setCallBacks",value:function(){var t=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this,this.on("solidity","compilationFinished",function(){var t=Object(o.a)(u.a.mark((function t(n,r,a,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.emit("statusChanged",{key:"none"}),e.filePath=n,e.compilationResult={data:c,source:r},e.fileName.next(n),!e.flattenSwitch){t.next=8;break}return e.flattenSwitch=!1,t.next=8,e.flattenAndSave(null);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"flattenFileCustomAction",value:function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.path[0]){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.flattenFile(e.path[0]);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"flattenFile",value:function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.call("fileManager","readFile",e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),this.feedback.next("".concat(e," does not exist!"));case 8:return this.flattenSwitch=!0,t.next=11,this.call("solidity","compile",e);case 11:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},{key:"flattenAndSave",value:function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.flatten(e);case 2:return t.next=4,this.save();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"flatten",value:function(){var t=Object(o.a)(u.a.mark((function t(e){var n,r,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&(this.compilationResult=e),this.filePath=this.compilationResult.source.target,n=this.compilationResult.data.sources,r=this.compilationResult.source.sources,a=g(n,this.filePath),c=a.isEmpty()?[this.filePath]:a.sort().reverse(),this.flattenedSources=F(c,r),this.emit("statusChanged",{key:"succeed",type:"success",title:"Contract flattened"}),this.feedback.next("Flattened contract copied to clipboard"),t.next=11,this._updateSaveButton(this.filePath);case 11:P()(this.flattenedSources);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_updateSaveButton",value:function(){var t=Object(o.a)(u.a.mark((function t(e){var n,r,a,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.split("/"),r=n[n.length-1],a=r.split("."),c=a[0],i="".concat(c,"_flat.sol"),this.flatFileName.next(i);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"save",value:function(){var t=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._saveFile(this.filePath,this.flattenedSources);case 2:return e=t.sent,this.emit("statusChanged",{key:"succeed",type:"success",title:"File saved"}),this.feedback.next("File saved"),t.next=7,this.call("fileManager","open",e);case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_saveFile",value:function(){var t=Object(o.a)(u.a.mark((function t(e,n){var r,a,c,i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/"),a=r[r.length-1],c=a.split("."),i=c[0],s="browser/".concat(i,"_flat.sol"),t.next=7,this.call("fileManager","writeFile",s,n);case 7:return t.abrupt("return",s);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),n}(j.PluginClient),R=n(155),B=n(5),_=new A;var I=function(){var t=p(_.feedback),e=p(_.fileName),n=p(_.flatFileName);return Object(B.jsxs)("div",{className:"App p-3",children:[Object(B.jsx)("div",{children:"Select a contract, compile it, then get the flattened version by pressing the button. Flattened source code will be copied to the clipboard."}),e?Object(B.jsxs)("div",{children:[Object(B.jsxs)(R.a,{className:"btn-sm w-100",onClick:Object(o.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.flatten(null);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:["Flatten ",e]}),Object(B.jsx)("div",{children:"You can save the flattened version to the file inside Remix."}),Object(B.jsxs)(R.a,{className:"btn-sm w-100",onClick:Object(o.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.save();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:["Save ",n]})]}):Object(B.jsx)("div",{}),Object(B.jsx)("div",{children:t})]})};i.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(I,{})}),document.getElementById("root"))},55:function(t,e,n){},57:function(t,e,n){}},[[151,1,2]]]);
//# sourceMappingURL=main.cd1be9ce.chunk.js.map